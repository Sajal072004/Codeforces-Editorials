/*
⡯⣽⢩⠯⣝⣭⣻⢭⠷⡽⣚⡳⣝⢫⡟⡽⢫⣽⣭⣷⣽⣿⣿⣿⣿⣿⣿⣭⣯⣝⣯⢻⣝⡻⣽⢻⣭⣛⠿⣭⢯⡽⣯⣽⢭⢯⡝⡯⣝⢯
⢷⣊⠷⣫⠝⢦⡟⣬⠳⣱⢣⠳⣌⢧⣛⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣯⣯⡝⣳⣝⡳⢮⡹⣞⡵⣫⢞⣵⢮⢏⡷⣹⢳⣛⢮
⢇⢎⡱⠥⡛⢆⠯⣐⢣⡑⢎⡱⢌⡼⣫⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣾⡷⣜⣟⢧⣛⠶⣭⣓⢯⣚⡯⡞⣵⢫⠷⣹⢎
⠊⠔⠨⠑⢌⡺⠑⠌⢢⠘⠤⢘⠸⣹⣿⣿⣟⣿⣟⡿⠟⡋⠟⣻⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣯⣟⢮⣭⢛⡶⣹⢎⡷⣫⣝⢮⣏⡽⣣⢯
⠀⠀⠁⠈⠂⡅⠌⡠⢁⣌⠐⠄⢢⣿⣟⣷⣿⣻⣾⣏⠐⠀⠀⠀⢿⣹⣿⣿⣿⣿⣿⣿⣿⣿⣷⢿⡾⡴⢯⡞⣵⣫⢶⣹⢎⡷⣪⢵⣫⢞
⠀⠀⠀⠀⢰⠀⠀⠀⠀⠈⠐⠂⢸⢿⠮⣽⡿⣽⣾⣿⡆⠀⠀⠀⢹⢛⣿⣸⢿⣿⣿⣿⣿⣿⣿⣯⡿⣝⠮⣝⠶⣹⢮⡝⣯⢳⣛⢮⠷⣞
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢦⢺⢇⡹⡿⣻⡗⢷⡫⡠⠀⠀⠀⠿⣷⣾⡟⢻⣿⣿⣿⣿⣟⣛⡷⢎⡻⢬⣛⣥⢳⡝⣾⢣⡟⢮⡻⣜
⠀⠀⠀⠀⠄⠀⠀⠀⠀⠀⠀⠀⣸⢃⡿⡔⣇⢙⠭⣶⢏⠐⠀⠀⠀⠀⠈⠁⠀⢠⡿⢿⡿⣿⣿⡹⢾⣡⢏⡳⠼⣬⢳⡹⢞⣧⣛⢧⡻⣜
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⢋⢾⠟⣷⣜⡌⠀⠉⠀⠀⠀⢦⠀⠀⠀⠀⠀⠉⢸⣙⡽⣭⢏⡿⡘⣆⢣⡝⢳⢬⠳⣭⢫⣗⠎⡷⣹⢎
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠁⠠⠚⠋⡽⠒⡙⠂⠀⠀⠀⠀⠈⠀⠀⠀⠀⠀⠀⣰⣾⠜⡡⢏⠲⢉⡇⠲⣌⠳⢎⡳⢥⡳⣹⢶⣙⠧⣏
⠀⠀⠀⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠠⠤⠮⢔⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⡿⠼⢯⠴⠈⠐⣀⣇⠱⣈⣧⡙⡜⢣⢳⠹⣎⠮⣝⢮
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢹⠲⣄⣀⠀⠀⠀⠀⠀⠊⣸⣁⡀⠈⠆⠀⠀⠀⢠⡒⠠⢂⠜⡩⢏⢎⡛⡧⣛⢎⠶
⠀⠀⢀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⠻⣇⠀⠀⠐⠀⠀⡀⡋⠀⠰⣤⣀⠀⠀⠀⠸⠀⠑⠨⢠⠁⠎⡰⢈⢗⠌⡎⡱
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣀⣀⠀⠀⣠⢴⣰⢿⡏⢀⡁⢅⠀⠀⠀⠸⢀⠁⡄⠀⢹⣶⣶⢶⣄⡀⠀⠀⠀⠀⠁⠂⡠⠁⢺⠈⠔⠡
⠀⠀⠁⠀⠀⠀⠀⠀⣠⢞⠯⣯⣙⢦⢫⡽⡣⢎⣳⢿⠀⣼⡌⢐⢤⡀⡠⠂⢠⣴⡷⢄⠈⣷⣯⡷⡝⠿⣳⠦⣤⣀⡀⠀⠀⠁⢀⠇⠈⠀
⠀⠀⠀⠀⠀⢀⣴⣿⣭⣞⣧⣛⣿⣮⣏⣰⢱⢫⣼⣇⠨⠘⣾⢦⣄⣄⢀⣼⣯⠟⠁⡄⠑⣽⢆⣳⠽⣨⢧⣛⠶⣝⣻⣷⡀⠀⠀⡀⠀⠀
⠀⠀⢀⡤⣶⢻⣝⢯⡞⣽⡶⠋⢋⡀⠐⠈⠱⣗⠾⡏⠀⠀⠀⢸⣯⣻⣽⠏⠐⠀⠀⢀⠘⢸⡞⢦⣉⡓⠧⣝⣺⡱⣏⣿⡆⠀⠀⠁⠀⠀
⠀⢀⣾⣷⣿⢻⣾⣽⣾⣏⡈⡀⡀⠀⠀⠀⠀⠈⢛⣧⠠⠄⠀⠈⣷⣯⠏⠀⠀⠀⠀⠈⠀⠈⣟⡼⢲⡹⠀⣞⡴⣻⡜⣾⡗⠀⠀⠘⠀⠀
⠀⣾⣽⣿⢹⣏⡟⣧⠳⣜⢭⢿⡇⠀⠀⠀⠀⠀⠈⢿⣂⡀⠂⢠⣿⣻⢸⠀⠀⠀⠀⠃⠀⠀⡿⣜⢧⣛⠘⣯⣾⢷⣹⣿⣇⣀⠀⠀⠀⠀
⠀⣿⣿⣿⣛⢧⣫⣜⢻⡜⣮⢛⡇⠀⠀⠀⠀⠀⠀⠈⣧⠢⠀⢸⣷⣿⠈⠀⠀⠀⠈⠀⠀⠀⣻⡜⣧⢯⢀⣿⣯⡾⣏⣿⡇⢠⠀⠀⠀⠀
⠀⠈⠻⣧⠻⣜⠶⣩⢞⡵⡭⢯⡁⠀⠀⠀⠀⠀⠐⠀⠸⡆⢂⣿⣿⣾⡆⠀⠀⠀⠂⠀⠀⠀⢸⣝⡮⢷⢸⣿⢟⡵⣻⣿⡇⠀⡀⠀⡆⠀
⠀⠀⣸⡯⣝⠮⣝⣣⢏⡾⣹⢷⠀⢠⠄⠀⡖⠀⢰⡇⠀⡆⠀⣿⣿⣿⡇⠀⠀⠀⠀⠀⠀⠀⣟⣮⣽⢃⣿⣛⣮⠽⣿⣿⡇⠀⠀⠀⠀⠀
⠀⠀⣿⡱⢎⡽⢲⠭⣶⢹⣳⣿⠀⢸⠀⠀⡿⠀⢸⡄⠀⠇⠀⣿⣿⣿⡇⠀⠀⠀⠀⠀⠀⢰⣟⡶⢣⣾⣳⡽⢮⣿⣿⣿⠀⠀⠇⠀⠰⠀
⠀⢀⡷⣙⠮⣜⢭⠳⣎⡳⣽⣿⡀⢸⣇⡀⣧⠀⣸⣅⠀⢧⠀⣿⣿⣿⡗⠀⠀⠀⠀⠀⠀⣼⡻⣣⣿⡾⣷⣛⣟⣾⢯⣿⠀⠀⠈⠀⠀⠀
⠀⢸⠲⣍⠞⡜⡮⣝⡲⣝⣿⣿⣷⠈⢧⠀⡇⢠⣷⠃⢸⡏⢰⣿⣿⣿⡟⣠⠂⠀⠀⠀⣸⡿⣵⣻⣿⣽⢳⣯⢾⡽⣿⣿⠀⠈⠄⠀⠠⠀
⠀⣍⡳⣌⠻⡼⣱⢎⡵⣾⣿⢻⣿⣷⣜⡇⡧⣸⡏⣠⣿⢳⣿⣿⣿⣿⡇⠁⠀⠀⠀⢀⡾⣼⣷⣿⣳⢯⣟⡾⣯⣽⣿⣿⠀⠡⢈⠐⠰⠀
⢰⢣⢳⡜⣽⡱⢧⣋⢶⡿⣭⢻⣿⣿⣿⣿⣷⣿⣷⣿⢹⣿⣿⣿⣿⣿⢁⠂⠀⠀⠀⢃⣿⣿⣿⣿⣟⣯⢿⣽⣳⣿⣿⣏⢐⠒⡠⠬⢔⡀
⣨⢧⡓⡾⣥⣛⠧⣞⡿⣝⢮⣻⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡄⡡⠔⠈⠀⢺⣹⣿⡿⣽⣻⣿⣿⣷⣿⣿⣿⡇⢨⠐⢠⠁⡂⠄
⡳⣎⣽⣳⣳⢭⣛⣼⢻⡜⣧⢿⣿⣿⣿⣿⣿⣿⣟⡫⠆⢸⣿⣿⣿⣿⣿⠁⠂⢐⣶⣿⣟⣷⣻⡽⣟⣿⣿⣿⣿⣿⣿⠄⠂⠌⠄⡂⢁⣎
⣷⣹⡶⣯⣟⢮⣳⣏⢷⡹⣞⣿⣿⣿⣿⣿⣿⣿⣿⡄⠁⣸⣿⣿⣿⣿⣿⣮⣿⢿⣻⢾⡽⣾⣽⣿⣿⣿⣿⣿⣿⣿⣯⣤⡿⣶⣶⣾⣻⢿
⣧⣿⢿⣽⢾⣣⢟⣮⡳⢯⣿⣿⣿⣿⣿⣿⣿⣿⣿⣏⢔⣿⣿⣿⣿⣿⡿⣿⡽⣯⣿⣿⣿⣿⣿⣿⣿⣿⣿⣻⣽⣳⣯⣳⣿⢿⣽⣾⣽⢯
⣿⣯⣿⢯⡿⣜⣯⢶⣛⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠸⠻⣿⡿⠿⢛⡛⠩⠻⢿⣷⡿⣞⣿⣿⣿⣿⣿⣞⣷⣿⣷⣿⣿⣟⣯⢷⣻⣞⡿



*/
#include <bits/stdc++.h>
#include<ext/pb_ds/assoc_container.hpp>
#include<ext/pb_ds/tree_policy.hpp>
using namespace std;
using namespace __gnu_pbds;
#define gc getchar_unlocked
#define rep(i,a,b) for (int i = a; i < b; i++)
#define each(i, k, n) for (int i = k;i<=n;i++)
#define ll long long
#define pb push_back
#define mp make_pair
#define endl '\n'
#define f first
typedef tree<pair<int, int>, null_type, less<pair<int, int>>, rb_tree_tag, tree_order_statistics_node_update > pbds; // find_by_order, order_of_key
ll min(ll a,int b) { if (a<b) return a; return b; }
ll expo(ll a, ll b, ll mod) {ll res = 1; while (b > 0) {if (b & 1)res = (res * a) % mod; a = (a * a) % mod; b = b >> 1;} return res;}
typedef pair<int, int> pii;
typedef pair<ll, ll> pl;
typedef vector<int> vi;
typedef vector<ll> vl;
typedef vector<pii> vpii;
typedef vector<pl> vpl;
typedef vector<vi> vvi;
typedef vector<vl> vvl;
void take(vl &v) {for(auto i : v) cin >> i;}
ll min(int a,ll b) { if (a<b) return a; return b; }
ll phin(ll n) {
    ll number = n;
    if (n % 2 == 0) {
        number /= 2;
        while (n % 2 == 0) n /= 2;
    }
    for (ll i = 3; i <= sqrt(n); i += 2) {
        if (n % i == 0) {
            while (n % i == 0) n /= i;
            number = (number / i * (i - 1));
        }
    }
    if (n > 1) number = (number / n * (n - 1)) ;
    return number;
}
ll max(ll a,int b) { if (a>b) return a; return b; }
ll max(int a,ll b) { if (a>b) return a; return b; }
ll gcd(ll a,ll b) { if (b==0) return a; return gcd(b, a%b); }
ll mod_add(ll a, ll b, ll m) {a = a % m; b = b % m; return (((a + b) % m) + m) % m;}
ll mod_mul(ll a, ll b, ll m) {a = a % m; b = b % m; return (((a * b) % m) + m) % m;}
ll mod_sub(ll a, ll b, ll m) {a = a % m; b = b % m; return (((a - b) % m) + m) % m;}
ll mminvprime(ll a, ll b) {return expo(a, b - 2, b);}
ll mod_div(ll a, ll b, ll m) {a = a % m; b = b % m; return (mod_mul(a, mminvprime(b, m), m) + m) % m;}  //only for prime m
ll lcm(ll a,ll b) { return a/gcd(a,b)*b; }
string to_upper(string a) { for (int i=0;i<(int)a.size();++i) if (a[i]>='a' && a[i]<='z') a[i]-='a'-'A'; return a; }
string to_lower(string a) { for (int i=0;i<(int)a.size();++i) if (a[i]>='A' && a[i]<='Z') a[i]+='a'-'A'; return a; }
bool prime(ll a) { if (a==1) return 0; for (int i=2;i<=round(sqrt(a));++i) if (a%i==0) return 0; return 1; }
#define mod 1000000007
vl fact(200005),ifact(200005);
const int N = 1e5 + 1;
void calculate_factorials() {
    fact[0] = 1;
    for (int i = 1; i < N; i++) {
        fact[i] = mod_mul(fact[i - 1], i, mod);
    }
    ifact[N - 1] = mminvprime(fact[N - 1],mod);
    for (int i = N - 2; i >= 0; i--) {
        ifact[i] = mod_mul(i + 1, ifact[i + 1], mod);
    }
}
ll nCr(int x, int y){
    if (y > x){return 0;}
    ll num = fact[x];num *= ifact[y];num %= mod;num *= ifact[x - y];num %= mod;return num;
}
typedef long int int32;
typedef unsigned long int uint32;
typedef long long int int64;
typedef unsigned long long int  uint64;
#define all(x) x.begin(), x.end()
#define sortall(x) sort(all(x))
#define tr(it, a) for (auto it = a.begin(); it != a.end(); it++)
#define PI 3.1415926535897932384626
#define sz(z) z.size()
bool dig(char j){
    int t = (int)(j - '0');
    return (t >= 0 && t <= 9);
}
bool symbol(char j){
    return ((j == '#') || (j == '*') || (j == '&'));
}
bool alpha(char j){
    return ((int)j >= 97 && (int)j <= 122);
}
inline void solve(){
    ll n,m;
    cin >> n >> m;
    vector<string> v(n);
    rep(i,0,n){
        cin >> v[i];
    }
    ll ans = INT_MAX;
    vl d(n,1e9),s(n,1e9),a(n,1e9);
    rep(i,0,n){
        rep(j,0,m){
            if(dig(v[i][j])){
                d[i] = min(d[i],min(j,m - j));
            }
        }
    }
    // cout << d[1];
    rep(i,0,n){
        rep(j,0,m){
            if(symbol(v[i][j])){
                s[i] = min(s[i],min(j,m - j));
            }
        }
    }
    rep(i,0,n){
        rep(j,0,m){
            if(alpha(v[i][j])){
                a[i] = min(a[i],min(j,m - j));
            }
        }
    }
    // cout << a[0] ;
    rep(i,0,n){
        rep(j,0,n){
            rep(k,0,n){
                if(i != j && i != k){
                    ans = min(ans,d[i] + s[j] + a[k]);
                }
            }
        }
    }
    cout << ans;
}
int main(){
    // 私をより強くする
                        
    ios_base::sync_with_stdio(0);
    cin.tie(0);
    cout.tie(0);
    int t = 1;
    // cin >> t;
    while (t--)
    {
        solve();
        cout<<endl;
    }
    return 0;
}